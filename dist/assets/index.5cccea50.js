(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function h(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var ce=E(function(e){return typeof e=="string"?e:null}),v=function(t){return t!=null};function E(e){return function(t){return v(e(t))}}var le=function(t){return t.length>0},m=function(t){return Object.keys(t).reduce(function(n,r){var o,a=t[r];return c({},n,v(a)?(o={},o[r]=a,o):{})},{})};function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.length-1;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];for(var d=t[0].apply(this,a),f=1;f<=r;f++)d=t[f].call(this,d);return d}}var de=E(function(e){return v(e)&&typeof e=="object"&&!Array.isArray(e)?e:null}),ue=E(function(e){return Array.isArray(e)&&e.every(ce)&&le(e)?e:null}),he=E(function(e){return de(e)&&"errors"in e&&ue(e.errors)?{errors:e.errors}:null}),pe=function(t){return he(t)?{errors:t.errors,source:"api"}:{errors:["Responded with a status code outside the 2xx range, and the response body is not recognisable."],source:"decoding"}},b=function(t){this.message=t},me=function(t){return/application\/[^+]*[+]?(json);?.*/.test(t)},ve=function(t){var n=t.headers.get("content-type");return v(n)&&me(n)},z=function(t){if(ve(t))return t.json().catch(function(n){throw new b("unable to parse JSON response.")});throw new b("expected JSON response from server.")},fe=function(t){return function(n){return(n.ok?t({response:n}).then(function(r){return{type:"success",status:n.status,response:r,originalResponse:n}}):z(n).then(function(r){return c({type:"error",status:n.status},pe(r),{originalResponse:n})})).catch(function(r){if(r instanceof b)return{type:"error",source:"decoding",status:n.status,originalResponse:n,errors:[r.message]};throw r})}},u=function(){return function(t){var n=t.response;return z(n)}},ye=function(t){return function(n){Object.keys(t).forEach(function(r){return n.searchParams.set(r,t[r].toString())})}},Pe=function(t){return function(n){n.pathname==="/"?n.pathname=t:n.pathname+=t}},Ie=function(t){var n=t.pathname,r=t.query;return function(o){var a=new URL(o);return Pe(n)(a),ye(r)(a),a.toString()}},Se=function(t){var n={};return t.forEach(function(r,o){n[o]=r}),n},qe=function(t){var n=new URL(t),r=n.pathname,o=n.searchParams,a=Se(o);return{query:a,pathname:r==="/"?void 0:r}},l=function(t){return function(n,r){r===void 0&&(r={});var o=t(n),a=o.headers,i=o.query,d=h(o,["headers","query"]);return c({},d,r,{query:i,headers:c({},a,r.headers)})}},s=function(t){return t},be=function(t){var n=t.accessKey,r=t.apiVersion,o=r===void 0?"v1":r,a=t.apiUrl,i=a===void 0?"https://api.unsplash.com":a,d=t.headers,f=t.fetch,T=h(t,["accessKey","apiVersion","apiUrl","headers","fetch"]);return function(j){var Z=j.handleResponse,_=j.handleRequest;return $(_,function(I){var L=I.pathname,ee=I.query,D=I.method,te=D===void 0?"GET":D,ne=I.headers,re=I.body,oe=I.signal,ae=Ie({pathname:L,query:ee})(i),ie=c({method:te,headers:c({},d,ne,{"Accept-Version":o},v(n)?{Authorization:"Client-ID "+n}:{}),body:re,signal:oe},T),se=f!=null?f:fetch;return se(ae,ie).then(fe(Z))})}},O="x-total",Re=function(t){var n=t.headers.get(O);if(v(n)){var r=parseInt(n);if(Number.isInteger(r))return r;throw new b("expected "+O+" header to be valid integer.")}else throw new b("expected "+O+" header to exist.")},y=function(){return function(t){var n=t.response;return u()({response:n}).then(function(r){return{results:r,total:Re(n)}})}},V=function(t){return v(t)?{collections:t.join()}:{}},ke=function(t){return v(t)?{topics:t.join()}:{}},p=function(t){var n=t.page,r=t.perPage,o=t.orderBy;return m({per_page:r,order_by:o,page:n})},g="/collections",Ee=function(){var e=function(n){var r=n.collectionId;return g+"/"+r+"/photos"};return s({getPathname:e,handleRequest:l(function(t){var n=t.collectionId,r=t.orientation,o=h(t,["collectionId","orientation"]);return{pathname:e({collectionId:n}),query:m(c({},p(o),{orientation:r}))}}),handleResponse:y()})}(),ge=function(){var e=function(n){var r=n.collectionId;return g+"/"+r};return s({getPathname:e,handleRequest:l(function(t){var n=t.collectionId;return{pathname:e({collectionId:n}),query:{}}}),handleResponse:u()})}(),we=function(){var e=function(){return g};return s({getPathname:e,handleRequest:l(function(t){return t===void 0&&(t={}),{pathname:e(),query:p(t)}}),handleResponse:y()})}(),Ae=function(){var e=function(n){var r=n.collectionId;return g+"/"+r+"/related"};return s({getPathname:e,handleRequest:l(function(t){var n=t.collectionId;return{pathname:e({collectionId:n}),query:{}}}),handleResponse:u()})}(),R="/photos",Te=function(){var e=function(){return R};return s({getPathname:function(n){return e()},handleRequest:l(function(t){return t===void 0&&(t={}),{pathname:R,query:m(p(t))}}),handleResponse:y()})}(),Oe=function(){var e=function(n){var r=n.photoId;return R+"/"+r};return s({getPathname:e,handleRequest:l(function(t){var n=t.photoId;return{pathname:e({photoId:n}),query:{}}}),handleResponse:u()})}(),Fe=function(){var e=function(n){var r=n.photoId;return R+"/"+r+"/statistics"};return s({getPathname:e,handleRequest:l(function(t){var n=t.photoId;return{pathname:e({photoId:n}),query:{}}}),handleResponse:u()})}(),Ue=function(){var e=function(){return R+"/random"};return s({getPathname:e,handleRequest:l(function(t){var n=t===void 0?{}:t,r=n.collectionIds,o=n.contentFilter,a=n.topicIds,i=h(n,["collectionIds","contentFilter","topicIds"]);return{pathname:e(),query:m(c({},i,{content_filter:o},V(r),ke(a))),headers:{"cache-control":"no-cache"}}}),handleResponse:u()})}(),$e={handleRequest:l(function(e){var t=e.downloadLocation,n=qe(t),r=n.pathname,o=n.query;if(!v(r))throw new Error("Could not parse pathname from url.");return{pathname:r,query:m(o)}}),handleResponse:u()},B="/search",Be=function(){var e=function(){return B+"/photos"};return s({getPathname:function(n){return e()},handleRequest:l(function(t){var n=t.query,r=t.page,o=t.perPage,a=t.orderBy,i=t.collectionIds,d=t.lang,f=t.contentFilter,T=h(t,["query","page","perPage","orderBy","collectionIds","lang","contentFilter"]);return{pathname:e(),query:m(c({query:n,content_filter:f,lang:d,order_by:a},p({page:r,perPage:o}),V(i),T))}}),handleResponse:u()})}(),Ce=function(){var e=function(){return B+"/collections"};return s({getPathname:function(n){return e()},handleRequest:l(function(t){var n=t.query,r=h(t,["query"]);return{pathname:e(),query:c({query:n},p(r))}}),handleResponse:u()})}(),He=function(){var e=function(){return B+"/users"};return s({getPathname:function(n){return e()},handleRequest:l(function(t){var n=t.query,r=h(t,["query"]);return{pathname:e(),query:c({query:n},p(r))}}),handleResponse:u()})}(),w="/users",Me=function(){var e=function(n){var r=n.username;return w+"/"+r};return s({getPathname:e,handleRequest:l(function(t){var n=t.username;return{pathname:e({username:n}),query:{}}}),handleResponse:u()})}(),Ne=function(){var e=function(n){var r=n.username;return w+"/"+r+"/photos"};return s({getPathname:e,handleRequest:l(function(t){var n=t.username,r=t.stats,o=t.orientation,a=h(t,["username","stats","orientation"]);return{pathname:e({username:n}),query:m(c({},p(a),{orientation:o,stats:r}))}}),handleResponse:y()})}(),je=function(){var e=function(n){var r=n.username;return w+"/"+r+"/likes"};return s({getPathname:e,handleRequest:l(function(t){var n=t.username,r=t.orientation,o=h(t,["username","orientation"]);return{pathname:e({username:n}),query:m(c({},p(o),{orientation:r}))}}),handleResponse:y()})}(),De=function(){var e=function(n){var r=n.username;return w+"/"+r+"/collections"};return s({getPathname:e,handleRequest:l(function(t){var n=t.username,r=h(t,["username"]);return{pathname:e({username:n}),query:p(r)}}),handleResponse:y()})}(),X="/topics",k=function(t){var n=t.topicIdOrSlug;return X+"/"+n},xe=s({getPathname:k,handleRequest:function(t){var n=t.page,r=t.perPage,o=t.orderBy,a=t.topicIdsOrSlugs;return{pathname:X,query:m(c({},p({page:n,perPage:r}),{ids:a==null?void 0:a.join(","),order_by:o}))}},handleResponse:y()}),Je=s({getPathname:k,handleRequest:function(t){var n=t.topicIdOrSlug;return{pathname:k({topicIdOrSlug:n}),query:{}}},handleResponse:u()}),Ke=function(){var e=$(k,function(t){return t+"/photos"});return s({getPathname:e,handleRequest:function(n){var r=n.topicIdOrSlug,o=n.orientation,a=h(n,["topicIdOrSlug","orientation"]);return{pathname:e({topicIdOrSlug:r}),query:m(c({},p(a),{orientation:o}))}},handleResponse:y()})}(),x;(function(e){e.Afrikaans="af",e.Amharic="am",e.Arabic="ar",e.Azerbaijani="az",e.Belarusian="be",e.Bulgarian="bg",e.Bengali="bn",e.Bosnian="bs",e.Catalan="ca",e.Cebuano="ceb",e.Corsican="co",e.Czech="cs",e.Welsh="cy",e.Danish="da",e.German="de",e.Greek="el",e.English="en",e.Esperanto="eo",e.Spanish="es",e.Estonian="et",e.Basque="eu",e.Persian="fa",e.Finnish="fi",e.French="fr",e.Frisian="fy",e.Irish="ga",e.ScotsGaelic="gd",e.Galician="gl",e.Gujarati="gu",e.Hausa="ha",e.Hawaiian="haw",e.Hindi="hi",e.Hmong="hmn",e.Croatian="hr",e.HaitianCreole="ht",e.Hungarian="hu",e.Armenian="hy",e.Indonesian="id",e.Igbo="ig",e.Icelandic="is",e.Italian="it",e.Hebrew="iw",e.Japanese="ja",e.Javanese="jw",e.Georgian="ka",e.Kazakh="kk",e.Khmer="km",e.Kannada="kn",e.Korean="ko",e.Kurdish="ku",e.Kyrgyz="ky",e.Latin="la",e.Luxembourgish="lb",e.Lao="lo",e.Lithuanian="lt",e.Latvian="lv",e.Malagasy="mg",e.Maori="mi",e.Macedonian="mk",e.Malayalam="ml",e.Mongolian="mn",e.Marathi="mr",e.Malay="ms",e.Maltese="mt",e.Myanmar="my",e.Nepali="ne",e.Dutch="nl",e.Norwegian="no",e.Nyanja="ny",e.Oriya="or",e.Punjabi="pa",e.Polish="pl",e.Pashto="ps",e.Portuguese="pt",e.Romanian="ro",e.Russian="ru",e.Kinyarwanda="rw",e.Sindhi="sd",e.Sinhala="si",e.Slovak="sk",e.Slovenian="sl",e.Samoan="sm",e.Shona="sn",e.Somali="so",e.Albanian="sq",e.Serbian="sr",e.Sesotho="st",e.Sundanese="su",e.Swedish="sv",e.Swahili="sw",e.Tamil="ta",e.Telugu="te",e.Tajik="tg",e.Thai="th",e.Turkmen="tk",e.Filipino="tl",e.Turkish="tr",e.Tatar="tt",e.Uighur="ug",e.Ukrainian="uk",e.Urdu="ur",e.Uzbek="uz",e.Vietnamese="vi",e.Xhosa="xh",e.Yiddish="yi",e.Yoruba="yo",e.ChineseSimplified="zh",e.ChineseTraditional="zh-TW",e.Zulu="zu"})(x||(x={}));var J;(function(e){e.LATEST="latest",e.POPULAR="popular",e.VIEWS="views",e.DOWNLOADS="downloads",e.OLDEST="oldest"})(J||(J={}));var ze=$(be,function(e){return{photos:{get:e(Oe),list:e(Te),getStats:e(Fe),getRandom:e(Ue),trackDownload:e($e)},users:{getPhotos:e(Ne),getCollections:e(De),getLikes:e(je),get:e(Me)},search:{getCollections:e(Ce),getPhotos:e(Be),getUsers:e(He)},collections:{getPhotos:e(Ee),get:e(ge),list:e(we),getRelated:e(Ae)},topics:{list:e(xe),get:e(Je),getPhotos:e(Ke)}}});const S=document.querySelector("#main"),Ve=document.querySelector(".load-more"),K=document.querySelector(".search-box input"),P=document.querySelector(".popup"),G=P.querySelector(".uil-times"),C=P.querySelector(".uil-import");document.getElementById("modernArt").addEventListener("click",()=>q("Modern Art"));document.getElementById("classics").addEventListener("click",()=>q("Classics"));document.getElementById("sculptures").addEventListener("click",()=>q("Sculptures"));document.getElementById("cubism").addEventListener("click",()=>q("Cubism"));document.getElementById("abstractArt").addEventListener("click",()=>q("Abstract Art"));document.getElementById("favourites").addEventListener("click",()=>q("Favourites"));const H=ze({accessKey:"rKWCXW0J0GXXIMXVfLzdnMjo6pi-ZUF5_Dn85NVMyRM"});let F=1,U=null;const A=e=>{fetch(e).then(t=>t.blob()).then(t=>{const n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=new Date().getTime(),n.click()}).catch(()=>alert("Faild to download image!"))};function q(e){if(e==="Favourites"){const t=M();t.length>0?(S.innerHTML="",t.forEach(n=>{H.photos.get({photoId:n}).then(r=>{if(r.type==="success"){const o=r.response;Xe(o)}}).catch(r=>{console.error(`Error ${n}:`,r)})})):S.innerHTML="<p>No liked images yet.</p>"}else N(e)}function M(){const e=localStorage.getItem("likedImageIds");return e?JSON.parse(e):[]}function Q(e,t){e.stopPropagation();const n=M(),r=document.querySelector(`.like-btn[data-image-id="${t}"]`),o=n.includes(t);if(o){const a=n.filter(d=>d!==t);localStorage.setItem("likedImageIds",JSON.stringify(a));const i=document.querySelector(`.card[data-image-id="${t}"]`);i&&i.remove()}else n.push(t),localStorage.setItem("likedImageIds",JSON.stringify(n));r.classList.toggle("liked",!o)}function Xe(e){const{id:t,urls:n,alt_description:r}=e,i=M().includes(t)?"liked":"",d=`<li class="card" data-image-id="${t}">
    <img src="${n.small}" alt="${r}"/>
    <div class="card-info">
      <div class="name">
        <i class="uil uil-camera"></i>
        <span>${r}</span>
      </div>
      <div class="card-btn">
        <button class="like-btn ${i}" data-image-id="${t}">
          <i class="uil uil-heart"></i>
        </button>
        <button class="download-btn" data-url="${n.small}">
          <i class="uil uil-import"></i>
        </button>
      </div>
    </div>
  </li>`;S.innerHTML+=d,Ge()}function Ge(){const e=document.querySelectorAll(".like-btn"),t=document.querySelectorAll(".download-btn");e.forEach(n=>{n.addEventListener("click",r=>{const o=n.dataset.imageId;Q(r,o)})}),t.forEach(n=>{n.addEventListener("click",r=>{const o=n.dataset.url;A(o),r.stopPropagation()})})}const Qe=(e,t,n)=>{const r=P.querySelector(".popup-box img"),o=P.querySelector(".popup-box span"),a=P.querySelector(".description");r&&o&&a?(r.src=t,o.innerText=e,a.innerText=n,C.setAttribute("data-img",t),P.classList.add("show"),document.body.style.overflow="hidden"):console.error("Popup elements not found.")},W=()=>{P.classList.remove("show"),document.body.style.overflow="auto"};function Y(e){const t=e.map(o=>`<li class="card">
      <img src="${o.urls.small}"  alt2="${o.description}" alt="${o.tags[2].title}"/>
      <div class="card-info">
          <div class="name">
              <i class="uil uil-camera"></i>
              <span>${o.alt_description}</span>
          </div>
          <div class="card-btn">
              <button class="like-btn" data-image-id="${o.id}">
                  <i class="uil uil-heart"></i>
              </button>
              <button class="download-btn" data-url="${o.urls.small}">
                  <i class="uil uil-import"></i>
              </button>
          </div>
      </div>
    </li>`);S.innerHTML+=t.join("");const n=document.querySelectorAll(".like-btn"),r=document.querySelectorAll(".download-btn");n.forEach(o=>{o.addEventListener("click",a=>{const i=o.dataset.imageId;Q(a,i)})}),r.forEach(o=>{o.addEventListener("click",a=>{const i=o.dataset.url;A(i),a.stopPropagation()})})}function N(e){S.innerHTML="",H.search.getPhotos({query:e,page:1,perPage:12,orientation:"portrait"}).then(t=>{if(t.type==="success"){const n=t.response.results;Y(n),F=2,U=e}})}function We(){U&&H.search.getPhotos({query:U,page:F,perPage:10,orientation:"portrait"}).then(e=>{if(e.type==="success"){const t=e.response.results;Y(t),F++}})}N("Classic Art");Ve.addEventListener("click",()=>{We()});K.addEventListener("keydown",e=>{if(e.key==="Enter"){const t=K.value.trim();t!==""&&N(t)}});G.addEventListener("click",W);C.addEventListener("click",e=>A(e.target.dataset.img));S.addEventListener("click",e=>{const t=e.target.closest("img");if(t){const n=t.getAttribute("src"),r=t.getAttribute("alt"),o=t.getAttribute("alt2");Qe(r,n,o)}});G.addEventListener("click",W);C.addEventListener("click",function(e){e.stopPropagation();const t=this.getAttribute("data-img");this.classList.contains("clicked")||(this.classList.add("clicked"),A(t))});
